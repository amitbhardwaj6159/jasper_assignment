::: Code Generated by Copilot 2e2e2b2e-1e7e-4e7e-8e7e-2e2e2b2e2b2e. This comment will be removed automatically after the file is saved :::
# Copilot Instructions for `jasper_assignment`

## Project Overview
- **FastAPI-based microservice** for authentication and protected endpoints.
- **Key structure:**
  - `backend/main.py`: FastAPI app entrypoint, sets up middleware and endpoints.
  - `backend/auth/`: JWT, token, and public key utilities for Keycloak integration.
  - `backend/middleware/auth-middleware.py`: Custom FastAPI middleware for admin role enforcement.
  - `backend/core/config.py`: Loads environment variables and project settings.
  - `backend/db/`: SQLAlchemy session and (empty) base class for DB models.

## Key Patterns & Conventions
- **Authentication:**
  - Uses Keycloak public key for JWT validation (`auth/get-public-key.py`).
  - Token extraction and validation logic is modularized in `auth/`.
  - Middleware (`auth-middleware.py`) enforces `admin` role for protected endpoints.
- **Dependency Injection:**
  - Use `Depends(validate_token_dependency)` for endpoint protection.
- **Settings:**
  - All config via `.env` and `core/config.py` (`Settings` class).
- **Database:**
  - SQLAlchemy engine/session setup in `db/session.py` using env-driven URL.
  - No models yet; `db/base_class.py` is a placeholder.

## Developer Workflows
- **Run server:**
  - `uvicorn backend.main:app --reload`
- **Install dependencies:**
  - `pip install -r backend/requirement.txt`
- **Environment:**
  - Requires `.env` file with Postgres credentials (see `core/config.py`).
- **Testing:**
  - No test suite present; add tests in `backend/tests/` if needed.

## Integration Points
- **Keycloak:**
  - Public key fetched at runtime for JWT validation.
  - Update `KEYCLOAK_PUBLIC_KEY_URL` in `auth/get-public-key.py` for your realm.
- **Database:**
  - Connection string built from `.env` variables; see `core/config.py`.

## Example: Protecting an Endpoint
```python
@app.get("/secure-endpoint")
async def secure_endpoint(payload: dict = Depends(validate_token_dependency)):
    return PlainTextResponse("Access Granted")
```

## Notable Deviations
- **No models or migrations** yet; DB layer is minimal.
- **No test or CI setup**; add as needed.

---
For questions, see `README.md` or inspect `backend/` for implementation details.
